

    self.connect(actionZoomIn, SIGNAL("triggered()"), self.zoomIn)
    self.connect(actionZoomOut, SIGNAL("triggered()"), self.zoomOut)
    self.connect(actionPan, SIGNAL("triggered()"), self.pan)



    # create the map tools
    self.toolPan = QgsMapToolPan(self.mapPreview)
    self.toolPan.setAction(actionPan)
    self.toolZoomIn = QgsMapToolZoom(self.mapPreview, False) # false = in
    self.toolZoomIn.setAction(actionZoomIn)
    self.toolZoomOut = QgsMapToolZoom(self.mapPreview, True) # true = out
    self.toolZoomOut.setAction(actionZoomOut)

    self.pan()

  def zoomIn(self):
    self.mapPreview.setMapTool(self.toolZoomIn)

  def zoomOut(self):
    self.mapPreview.setMapTool(self.toolZoomOut)

  def pan(self):
    self.mapPreview.setMapTool(self.toolPan)












def canvasReleaseEvent(self,event):
    x = event.pos().x()
    y = event.pos().y()
           
    startingPoint = QPoint(x,y)
    result = []
    excludePoints = []
     
    snapper = QgsMapCanvasSnapper(self.canvas)
       
    snapper.snapToCurrentLayer (startingPoint,result,QgsSnapper.SnapToVertex, 10000, excludePoints)
    print "result: ",result


	-) fare test numerici
	-) controllare problema del CRS per il layer puntuale che non torna
			registrare i CRS dei punti di destinazione; se sono di un tipo solo applicare quello,
			in caso di più tipi allestire un dialogo con cvasella a discesa per far scegliere all'utente
	-) quando si disattiva un CP togliere anche i marker
	-) quando si aggiunge una riga alla tabella cambiano gli header di colonna
	-) all'avvio di qgis da errore sul file resources_rc che non trova (perchè non c'è))
	-) attivare comando CANCEL
	-) scaricare il layer_prova alla fine
	a) porterei la definizione del canvas nella GUI (occorre importare anche pyqgis nel modulo)
	b) disattivare buttone CP_selection fino ad avvenuto caricamento del layer
	c) metterei anche il pan sul mapPreview
	-) eventualmente anche lo SCROLL
	x) forse è meglio unire vectorgeoref e vectorgeorefdialog

(2013-12-02)
	1) aggiornata la routine lsm per errori nel calcolo numerico
	2) inserita routine di snapping multifeature
(2013-12-01)
	1) aggiornata la gui (Luca)
(2013-11-30)
	1) aggiungere righe alla tabella
	2) aggiungere i punti nelle righe
	3) aggiungere comando CLEAR
	4) rilettura delle cds dei punti
	5) eliminato il tab vuoto (ex SETTINGS)
	6) risolto con un workaround il problema degli attributi (il layer viene duplicato e poi modificata la copia)
(2013-11-29)
	1) aggiunto layer trasformato al canvas
	2) problema di ricopiare gli attributi (controllare: non funziona)
	3) trasformazione layer puntuali
	4) testare linee
	5) testare poligoni
(2013-11-28)
	1) cleanSelection (eliminare i markers)
	2) momentaneamente aggiunti i punti alle liste origine e destinazione
	3) semplificata la gui
	4) inserita la trasformazione, da testare
(2013-11-27)
modifiche alla versione di Luca:
	1) eliminato il rubberband
	2) modificato button CP_selection da tool a push
(2013-11-26)
alcune osservazioni e modifiche (laddove era necessario per non incasinare troppo)
sulla GUI di Luca:
	1) eliminata la combobox delle modalità e la corrispondente label
			la modalità sarà solo una
	2) eliminerei la combobox dei layer e userei il pulsante LOAD_LAYER per aprire un file
	3) eliminato lo spinbox e relativa label
	4) al momento non mi sembra necessaria la tab SETTING
	5) aggiungere una checkbox vicino ad ogni control point (ogni riga della tabella))
	6) prelevo il layer da trattare da file, non da quelli precaricati
	7) eliminerei il controllo su layer preesistenti

